# åå°ç®¡ç†ç³»ç»Ÿ - ä½¿ç”¨æŒ‡å—

## ğŸ‰ é¡¹ç›®å·²æˆåŠŸåˆ›å»ºï¼

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Vue 3 + TypeScript + Element Plus + UnoCSS** çš„ç°ä»£åŒ–åå°ç®¡ç†ç³»ç»Ÿã€‚

## ğŸ“¦ å·²å®ç°çš„åŠŸèƒ½

### âœ… æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

1. **ç”¨æˆ·ç™»å½•ç³»ç»Ÿ**
   - JWT Token è®¤è¯
   - ç™»å½•è¡¨å•éªŒè¯
   - è‡ªåŠ¨è·¯ç”±è·³è½¬
   - Token æŒä¹…åŒ–å­˜å‚¨

2. **ç”¨æˆ·ç®¡ç†æ¨¡å—**
   - ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µã€æœç´¢ã€æ’åºï¼‰
   - æ–°å¢/ç¼–è¾‘/åˆ é™¤ç”¨æˆ·
   - æ‰¹é‡åˆ é™¤
   - ç”¨æˆ·è§’è‰²åˆ†é…ï¼ˆå¤šé€‰ï¼‰
   - å¯†ç é‡ç½®åŠŸèƒ½
   - æŒ‰é’®çº§æƒé™æ§åˆ¶

3. **è§’è‰²ç®¡ç†æ¨¡å—**
   - è§’è‰²åˆ—è¡¨ç®¡ç†
   - è§’è‰²CRUDæ“ä½œ
   - èœå•æƒé™åˆ†é…ï¼ˆæ ‘å½¢é€‰æ‹©å™¨ï¼‰
   - è§’è‰²çŠ¶æ€ç®¡ç†

4. **èœå•ç®¡ç†æ¨¡å—**
   - æ ‘å½¢èœå•å±•ç¤º
   - æ”¯æŒä¸‰ç§èœå•ç±»å‹ï¼š
     - **M** - ç›®å½•ï¼ˆä¸€çº§èœå•ï¼‰
     - **C** - èœå•ï¼ˆé¡µé¢è·¯ç”±ï¼‰
     - **F** - æŒ‰é’®ï¼ˆæŒ‰é’®æƒé™ï¼‰
   - èœå•å›¾æ ‡é€‰æ‹©
   - è·¯ç”±é…ç½®
   - æƒé™æ ‡è¯†é…ç½®

5. **å­—å…¸ç®¡ç†æ¨¡å—**
   - å­—å…¸ç±»å‹ç®¡ç†
   - å­—å…¸æ•°æ®ç®¡ç†
   - å­—å…¸çŠ¶æ€æ§åˆ¶

6. **é…ç½®ç®¡ç†æ¨¡å—**
   - ç³»ç»Ÿé…ç½®ç®¡ç†
   - ä¸šåŠ¡é…ç½®ç®¡ç†
   - é…ç½®åˆ†ç±»

### âœ… æƒé™ç³»ç»Ÿ (RBAC)

**æƒé™æ¨¡å‹**
```
ç”¨æˆ· (User) â†â†’ è§’è‰² (Role) â†â†’ èœå• (Menu)
    1 : N             1 : N
```

**æƒé™æ§åˆ¶**
- **é¡µé¢çº§æƒé™**: é€šè¿‡åŠ¨æ€è·¯ç”±å®ç°
- **æŒ‰é’®çº§æƒé™**: ä½¿ç”¨ `v-permission` è‡ªå®šä¹‰æŒ‡ä»¤

**ä½¿ç”¨ç¤ºä¾‹**
```vue
<!-- æŒ‰é’®æƒé™æ§åˆ¶ -->
<el-button v-permission="['system:user:add']">æ–°å¢ç”¨æˆ·</el-button>
<el-button v-permission="['system:user:edit']">ç¼–è¾‘ç”¨æˆ·</el-button>
<el-button v-permission="['system:user:delete']">åˆ é™¤ç”¨æˆ·</el-button>
```

### âœ… å¸ƒå±€ç³»ç»Ÿ

**å®Œæ•´çš„åå°å¸ƒå±€**
- ä¾§è¾¹æ èœå•ï¼ˆå¯æŠ˜å ï¼‰
- é¡¶éƒ¨å¯¼èˆªæ 
- é¢åŒ…å±‘å¯¼èˆª
- æ ‡ç­¾é¡µï¼ˆTabï¼‰å¯¼èˆª
- ç”¨æˆ·ä¿¡æ¯ä¸‹æ‹‰èœå•

**å¸ƒå±€ç‰¹æ€§**
- å“åº”å¼è®¾è®¡
- è·¯ç”±ç¼“å­˜ï¼ˆkeep-aliveï¼‰
- æ ‡ç­¾é¡µå³é”®èœå•ï¼ˆåˆ·æ–°ã€å…³é—­å…¶ä»–ã€å…³é—­æ‰€æœ‰ï¼‰
- ä¾§è¾¹æ å±•å¼€/æŠ˜å åŠ¨ç”»

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd apps/admin
pnpm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

æœåŠ¡å°†åœ¨ http://localhost:3000 å¯åŠ¨

### 3. ç™»å½•ç³»ç»Ÿ

#### ç®¡ç†å‘˜è´¦å·
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`
- **æƒé™**: æ‰€æœ‰æƒé™ï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰

#### æ™®é€šç”¨æˆ·
- **ç”¨æˆ·å**: `user`
- **å¯†ç **: `user123`
- **æƒé™**: ä»…æŸ¥çœ‹æƒé™

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
pnpm build
```

æ„å»ºæ–‡ä»¶å°†ç”Ÿæˆåœ¨ `dist` ç›®å½•

### 5. é¢„è§ˆç”Ÿäº§æ„å»º

```bash
pnpm preview
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
apps/admin/
â”œâ”€â”€ public/               # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/             # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ auth.ts      # è®¤è¯æ¥å£
â”‚   â”‚   â”œâ”€â”€ user.ts      # ç”¨æˆ·æ¥å£
â”‚   â”‚   â”œâ”€â”€ role.ts      # è§’è‰²æ¥å£
â”‚   â”‚   â”œâ”€â”€ menu.ts      # èœå•æ¥å£
â”‚   â”‚   â”œâ”€â”€ dict.ts      # å­—å…¸æ¥å£
â”‚   â”‚   â””â”€â”€ config.ts    # é…ç½®æ¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/          # èµ„æºæ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ components/      # é€šç”¨ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/     # ç»„åˆå¼å‡½æ•°
â”‚   â”‚
â”‚   â”œâ”€â”€ directives/      # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ permission.ts    # æƒé™æŒ‡ä»¤
â”‚   â”‚   â””â”€â”€ index.ts         # æŒ‡ä»¤å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/         # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ DefaultLayout.vue   # ä¸»å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ Sidebar.vue         # ä¾§è¾¹æ 
â”‚   â”‚   â”œâ”€â”€ MenuItem.vue        # èœå•é¡¹
â”‚   â”‚   â”œâ”€â”€ Header.vue          # é¡¶éƒ¨æ 
â”‚   â”‚   â”œâ”€â”€ Breadcrumb.vue      # é¢åŒ…å±‘
â”‚   â”‚   â””â”€â”€ TagsView.vue        # æ ‡ç­¾é¡µ
â”‚   â”‚
â”‚   â”œâ”€â”€ mock/            # Mock æ•°æ®
â”‚   â”‚   â”œâ”€â”€ user.ts      # ç”¨æˆ· Mock
â”‚   â”‚   â”œâ”€â”€ role.ts      # è§’è‰² Mock
â”‚   â”‚   â”œâ”€â”€ menu.ts      # èœå• Mock
â”‚   â”‚   â”œâ”€â”€ dict.ts      # å­—å…¸ Mock
â”‚   â”‚   â”œâ”€â”€ config.ts    # é…ç½® Mock
â”‚   â”‚   â””â”€â”€ index.ts     # Mock å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ index.ts     # è·¯ç”±å®ä¾‹
â”‚   â”‚   â”œâ”€â”€ routes.ts    # é™æ€è·¯ç”±
â”‚   â”‚   â””â”€â”€ guards.ts    # è·¯ç”±å®ˆå«
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/          # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ user.ts      # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ permission.ts # æƒé™çŠ¶æ€
â”‚   â”‚   â””â”€â”€ app.ts       # åº”ç”¨çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ types/           # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ common.ts    # é€šç”¨ç±»å‹
â”‚   â”‚   â”œâ”€â”€ user.ts      # ç”¨æˆ·ç±»å‹
â”‚   â”‚   â”œâ”€â”€ role.ts      # è§’è‰²ç±»å‹
â”‚   â”‚   â”œâ”€â”€ menu.ts      # èœå•ç±»å‹
â”‚   â”‚   â”œâ”€â”€ dict.ts      # å­—å…¸ç±»å‹
â”‚   â”‚   â””â”€â”€ config.ts    # é…ç½®ç±»å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ request.ts   # Axios å°è£…
â”‚   â”‚   â”œâ”€â”€ auth.ts      # è®¤è¯å·¥å…·
â”‚   â”‚   â”œâ”€â”€ permission.ts # æƒé™åˆ¤æ–­
â”‚   â”‚   â”œâ”€â”€ validate.ts  # è¡¨å•éªŒè¯
â”‚   â”‚   â””â”€â”€ tree.ts      # æ ‘å½¢æ•°æ®å¤„ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ views/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ login/       # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ home/        # é¦–é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ system/      # ç³»ç»Ÿç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ user/    # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ role/    # è§’è‰²ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ menu/    # èœå•ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ dict/    # å­—å…¸ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ config/  # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ 404.vue      # 404 é¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ App.vue          # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts          # å…¥å£æ–‡ä»¶
â”‚
â”œâ”€â”€ .env.development     # å¼€å‘ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.production      # ç”Ÿäº§ç¯å¢ƒå˜é‡
â”œâ”€â”€ vite.config.ts       # Vite é…ç½®
â”œâ”€â”€ uno.config.ts        # UnoCSS é…ç½®
â”œâ”€â”€ tsconfig.json        # TypeScript é…ç½®
â”œâ”€â”€ package.json         # é¡¹ç›®é…ç½®
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## ğŸ¨ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Vue 3.5** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript 5.8** - JavaScript çš„è¶…é›†
- **Vite 7** - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·

### UI æ¡†æ¶
- **Element Plus 2.11** - Vue 3 ç»„ä»¶åº“
- **UnoCSS** - å³æ—¶åŸå­åŒ– CSS å¼•æ“
- **Element Plus Icons** - å›¾æ ‡åº“

### çŠ¶æ€ç®¡ç†
- **Pinia 3.0** - Vue å®˜æ–¹çŠ¶æ€ç®¡ç†åº“
- **pinia-plugin-persistedstate** - çŠ¶æ€æŒä¹…åŒ–æ’ä»¶

### è·¯ç”±
- **Vue Router 4.5** - Vue å®˜æ–¹è·¯ç”±

### HTTP è¯·æ±‚
- **Axios 1.12** - HTTP å®¢æˆ·ç«¯
- **Mock.js 1.1** - æ•°æ®æ¨¡æ‹Ÿ

### å…¶ä»–
- **NProgress** - è¿›åº¦æ¡
- **TypeScript ä¸¥æ ¼æ¨¡å¼** - ç±»å‹å®‰å…¨

## ğŸ”§ æ ¸å¿ƒç‰¹æ€§

### 1. UnoCSS åŸå­åŒ– CSS

é¡¹ç›®å®Œå…¨ä½¿ç”¨ UnoCSS å®ç°æ ·å¼ï¼Œå¸¸ç”¨ç±»åï¼š

**å¸ƒå±€**
```html
<div class="flex items-center justify-center">å±…ä¸­å¸ƒå±€</div>
<div class="flex-between">ä¸¤ç«¯å¯¹é½</div>
<div class="grid grid-cols-4 gap-4">æ …æ ¼å¸ƒå±€</div>
```

**é—´è·**
```html
<div class="p-4 m-4">å†…å¤–è¾¹è·</div>
<div class="px-2 py-2">æ°´å¹³å‚ç›´è¾¹è·</div>
```

**å°ºå¯¸**
```html
<div class="w-full h-screen">å…¨å®½æ»¡å±é«˜</div>
<div class="w-64">å›ºå®šå®½åº¦</div>
```

**é¢œè‰²**
```html
<div class="bg-white text-gray-700">ç™½åº•ç°å­—</div>
<div class="bg-primary text-white">ä¸»é¢˜è‰²</div>
```

### 2. è¡¨å•éªŒè¯

æä¾›ä¸°å¯Œçš„éªŒè¯è§„åˆ™ï¼š

```typescript
import { requiredRule, emailRule, phoneRule, passwordRule } from '@/utils/validate'

const formRules = {
  username: [requiredRule('è¯·è¾“å…¥ç”¨æˆ·å'), usernameRule],
  email: [emailRule],
  phone: [phoneRule],
  password: [passwordRule]
}
```

**å¯ç”¨éªŒè¯è§„åˆ™**
- `requiredRule` - å¿…å¡«éªŒè¯
- `emailRule` - é‚®ç®±æ ¼å¼éªŒè¯
- `phoneRule` - æ‰‹æœºå·éªŒè¯
- `passwordRule` - å¯†ç å¼ºåº¦éªŒè¯
- `usernameRule` - ç”¨æˆ·åéªŒè¯
- `urlRule` - URL æ ¼å¼éªŒè¯

### 3. åŠ¨æ€è·¯ç”±

**è·¯ç”±åŠ è½½æµç¨‹**

1. ç”¨æˆ·ç™»å½•æˆåŠŸ
2. è·å–ç”¨æˆ·ä¿¡æ¯å’Œæƒé™
3. æ ¹æ®æƒé™åŠ¨æ€ç”Ÿæˆè·¯ç”±
4. æ·»åŠ è·¯ç”±åˆ°è·¯ç”±è¡¨
5. æ¸²æŸ“ä¾§è¾¹æ èœå•

**ä»£ç ç¤ºä¾‹**
```typescript
// stores/permission.ts
async function generateRoutes() {
  const menuTree = await getMenuTree()
  const routes = generateRoutesFromMenus(menuTree)
  routes.forEach(route => {
    router.addRoute('/', route)
  })
  return routes
}
```

### 4. Mock æ•°æ®

ä½¿ç”¨ Mock.js æ¨¡æ‹Ÿåç«¯æ¥å£ï¼Œå¼€å‘æ—¶æ— éœ€åç«¯å³å¯è¿è¡Œã€‚

**Mock æ•°æ®ä½ç½®**: `src/mock/`

**è¿æ¥çœŸå®åç«¯**: åˆ é™¤ `main.ts` ä¸­çš„ `import './mock'` å³å¯

### 5. æƒé™æŒ‡ä»¤

**åœ¨ç»„ä»¶ä¸­ä½¿ç”¨**
```vue
<template>
  <!-- å•ä¸ªæƒé™ -->
  <el-button v-permission="['system:user:add']">æ–°å¢</el-button>
  
  <!-- å¤šä¸ªæƒé™ï¼ˆæ»¡è¶³ä»»æ„ä¸€ä¸ªå³å¯ï¼‰ -->
  <el-button v-permission="['system:user:edit', 'system:user:update']">
    ç¼–è¾‘
  </el-button>
</template>
```

**åœ¨ä»£ç ä¸­åˆ¤æ–­**
```typescript
import { hasPermission } from '@/utils/permission'

if (hasPermission(['system:user:delete'])) {
  // æœ‰åˆ é™¤æƒé™
}
```

## ğŸ“ å¼€å‘è§„èŒƒ

### ç»„ä»¶å¼€å‘
```vue
<template>
  <!-- ä½¿ç”¨ UnoCSS åŸå­ç±» -->
  <div class="p-4 flex items-center">
    <el-button>æŒ‰é’®</el-button>
  </div>
</template>

<script setup lang="ts">
// ä½¿ç”¨ç»„åˆå¼ API
import { ref, reactive } from 'vue'

const count = ref(0)
const state = reactive({ name: '' })
</script>
```

### API è°ƒç”¨
```typescript
import { getUserList } from '@/api/user'

async function loadData() {
  const data = await getUserList({ pageNum: 1, pageSize: 10 })
  console.log(data)
}
```

### çŠ¶æ€ç®¡ç†
```typescript
import { useUserStore } from '@/stores/user'

const userStore = useUserStore()
await userStore.loginAction({ username: 'admin', password: 'admin123' })
```

## ğŸ” æƒé™æ ‡è¯†è§„èŒƒ

æ ¼å¼ï¼š`æ¨¡å—:åŠŸèƒ½:æ“ä½œ`

**ç¤ºä¾‹**
```
system:user:list    # ç”¨æˆ·åˆ—è¡¨æŸ¥çœ‹
system:user:add     # ç”¨æˆ·æ–°å¢
system:user:edit    # ç”¨æˆ·ç¼–è¾‘
system:user:delete  # ç”¨æˆ·åˆ é™¤

system:role:list    # è§’è‰²åˆ—è¡¨
system:role:assign  # åˆ†é…è§’è‰²æƒé™
```

## ğŸ“– ç¯å¢ƒå˜é‡

åˆ›å»º `.env.development` å’Œ `.env.production` æ–‡ä»¶ï¼ˆå·²è‡ªåŠ¨åˆ›å»ºï¼‰ï¼š

```bash
# å¼€å‘ç¯å¢ƒ
VITE_APP_TITLE=åå°ç®¡ç†ç³»ç»Ÿ
VITE_APP_BASE_API=/api
VITE_APP_MODE=development
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç™»å½•åæ²¡æœ‰èœå•ï¼Ÿ

æ£€æŸ¥ç”¨æˆ·çš„è§’è‰²æ˜¯å¦åˆ†é…äº†èœå•æƒé™ã€‚

### 2. æŒ‰é’®æƒé™ä¸ç”Ÿæ•ˆï¼Ÿ

ç¡®è®¤è§’è‰²å·²åˆ†é…å¯¹åº”çš„æŒ‰é’®æƒé™ï¼ˆèœå•ç±»å‹ä¸º F çš„æƒé™ï¼‰ã€‚

### 3. è·¯ç”±è·³è½¬åé¡µé¢ç©ºç™½ï¼Ÿ

æ£€æŸ¥èœå•é…ç½®çš„ `component` è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚

### 4. Mock æ•°æ®ä¸ç”Ÿæ•ˆï¼Ÿ

ç¡®è®¤ `main.ts` ä¸­å·²å¯¼å…¥ `'./mock'`ã€‚

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Vue 3 æ–‡æ¡£](https://cn.vuejs.org/)
- [Element Plus æ–‡æ¡£](https://element-plus.org/zh-CN/)
- [UnoCSS æ–‡æ¡£](https://unocss.dev/)
- [Pinia æ–‡æ¡£](https://pinia.vuejs.org/zh/)
- [Vue Router æ–‡æ¡£](https://router.vuejs.org/zh/)

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **è¿æ¥çœŸå®åç«¯**
   - åˆ é™¤ Mock å¯¼å…¥
   - ä¿®æ”¹ API åŸºç¡€åœ°å€
   - è°ƒæ•´æ¥å£å“åº”æ ¼å¼

2. **æ‰©å±•åŠŸèƒ½**
   - æ·»åŠ æ›´å¤šä¸šåŠ¡æ¨¡å—
   - å®Œå–„æƒé™æ§åˆ¶
   - ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

3. **æ€§èƒ½ä¼˜åŒ–**
   - è·¯ç”±æ‡’åŠ è½½
   - ç»„ä»¶æŒ‰éœ€åŠ è½½
   - å›¾ç‰‡å‹ç¼©å’Œæ‡’åŠ è½½

4. **éƒ¨ç½²ä¸Šçº¿**
   - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
   - é…ç½® Nginx
   - è®¾ç½®ç¯å¢ƒå˜é‡

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

